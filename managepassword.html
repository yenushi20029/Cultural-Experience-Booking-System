<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
    <script src='main.js'></script>

    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
   

    <style>

*{
    margin:0;
    padding: 0;
    box-sizing: border-box;
    font-family: "Poppins", sans-serif;
}

header{
    z-index:999;
    position: absolute;
    top:0;
    left:0;
    width:100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 200px;
    transition: 0.5s ease;
}

header .brand{
    color:white;
    font-size: 1.5em;
    font-weight: 700;
    text-transform: uppercase;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap:8px;
    white-space: nowrap;
    font-family: 'Arial', sans-serif;
}

header .brand i {
    font-size: 1.5em; 
    color: #C6A969; 
}

.navigation {
    display: flex;
    gap: 20px;
    flex-grow: 2; 
    justify-content: flex-end; 
}

.brand {
    font-size: 1.8em;
    font-weight: bold;
    flex-grow: 1; 
    color: white; 
}

header .navigation{
    position: relative;
}

header .navigation .navigation-items a{
    position: relative;
    color: white;
    font-size: 1em;
    font-weight: 500;
    text-decoration: none;
    margin-left: 30px;
    transition: 0.3s ease;
}

header .navigation .navigation-items a:before{
    content:'';
    position: absolute;
    background: white;
    width:0;
    height: 3px;
    bottom: 0;
    left:0;
    transition: 0.3s ease;
}

header .navigation .navigation-items a:hover:before{
    width:100%; 
}

.search-bar {
    padding: 5px;
    margin-left: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    width: 160px;
}

.btnr1 {
    padding: 10px 15px;
    background-color:black;
    color: white;
    border: none;
    border-radius: 25px;
    margin-left: 5px;
    cursor: pointer;
    opacity: 60%;
}

.btnr1:hover {
    background-color: #C6A969;
}

@media (max-width: 1040px){
    header {
        padding: 12px 20px;
    }
}
        
.footer {
    width: 100%;
    background: #222;
    padding: 20px;
    text-align: center;
    margin-top: auto;
}

body {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    background: #597E52;
}

.container {
    flex-grow: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 50px 20px;
    width: 100%;
}

.wrapper {
    width: 850px;
    background: linear-gradient(145deg, #4E6F48, #3b4a34);
    border-radius: 20px;
    padding: 40px;
    color: white;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    transition: 0.3s ease;
    margin: 100px 0;
}

.footer .box-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 5px;
}

.footer .box-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
}

.footer .box {
    flex: 1 1 200px;
    max-width: 300px;
    text-align: left;
}

.footer .box h3 {
    font-size: 18px;
    margin-bottom: 15px;
    color: #C6A969;
}

.footer .box a {
    display: block;
    color: #ccc;
    font-size: 14px;
    text-decoration: none;
    margin: 5px 0;
    transition: color 0.3s ease;
}

.footer .box a:hover {
    color: #C6A969;
}

.footer .box i {
    margin-right: 8px;
}

.footer .credit {
    margin-top: 20px;
    font-size: 14px;
    border-top: 1px solid #444;
    padding-top: 10px;
    text-align: center; 
}


.footer .credit strong {
    color: #C6A969;
}

/* Password Management Styles */
.password-management {
    width: 100%;
    margin-top: 30px;
    padding: 20px;
    background: rgba(0, 0, 0, 0.1);
    border-radius: 10px;
}

.password-management h2 {
    color: #C6A969;
    margin-bottom: 20px;
    font-size: 24px;
    text-align: center;
}

.password-form {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.form-group {
    display: flex;
    flex-direction: column;
}

.form-group label {
    margin-bottom: 5px;
    font-weight: 500;
}

.form-group input {
    padding: 10px 15px;
    border-radius: 5px;
    border: none;
    background: rgba(255, 255, 255, 0.9);
    font-size: 16px;
}

.password-submit {
    padding: 12px 20px;
    background-color: #C6A969;
    color: white;
    border: none;
    border-radius: 5px;
    font-weight: 600;
    cursor: pointer;
    margin-top: 10px;
    transition: background-color 0.3s ease;
}

.password-submit:hover {
    background-color: #b5985d;
}

.password-strength {
    margin-top: 5px;
    font-size: 12px;
    color: #ccc;
}

.password-match {
    margin-top: 5px;
    font-size: 12px;
    color: #4CAF50;
    display: none;
}

.password-mismatch {
    margin-top: 5px;
    font-size: 12px;
    color: #f44336;
    display: none;
}

@media (max-width: 768px) {
    .wrapper {
        width: 95%;
        padding: 20px;
    }
    
    .password-management {
        padding: 15px;
    }
}

.error-message {
    padding: 10px;
    background-color: #ffebee;
    border-radius: 4px;
    margin-top: 10px;
}

.success-message {
    padding: 10px;
    background-color: #e8f5e9;
    border-radius: 4px;
    margin-top: 10px;
}

.password-strength, .password-match, .password-mismatch {
    font-size: 0.8em;
    margin-top: 5px;
    padding: 3px;
    border-radius: 3px;
}

.password-mismatch {
    color: #ff4444;
}

.password-match {
    color: #00C851;
}

button[disabled] {
    opacity: 0.7;
    cursor: not-allowed;
}

/* Form Input Styles */
.password-management input[type="password"] {
    width: 100%;
    padding: 12px 15px;
    margin: 8px 0;
    border: 1px solid #ccc;
    border-radius: 4px;
    background: rgba(255, 255, 255, 0.95);
    font-size: 16px;
    transition: all 0.3s ease;
}

.password-management input[type="password"]:focus {
    outline: none;
    border-color: #C6A969;
    box-shadow: 0 0 5px rgba(198, 169, 105, 0.5);
}

.password-management button[type="submit"] {
    width: 100%;
    padding: 12px;
    background-color: #C6A969;
    color: white;
    border: none;
    border-radius: 5px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s ease;
    margin-top: 15px;
}

.password-management button[type="submit"]:hover {
    background-color: #b5985d;
}

/* Message styles */
#responseMessage {
    margin-top: 15px;
    padding: 10px;
    border-radius: 4px;
    text-align: center;
}

.error-message {
    background-color: #ffebee;
    color: #ff4444;
    border: 1px solid #ff4444;
}

.success-message {
    background-color: #e8f5e9;
    color: #00C851;
    border: 1px solid #00C851;
}
        
    </style>
</head>
<body>
    <!--Header Section-->
    <header>
        <a href="#" class="brand"> Ayubo Go</a>
        </div>
        <div class="navigation">
            <div class="navigation-items">
              <a href="#">Home</a>
              <a href="#">Experiences</a>
              <a href="#">Help</a>
              <a href="#">About</a>
              <a href="#">Blogs and reviews</a>
              <button class="btnr1">Book Now</button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <div class="wrapper">
            <div class="password-management">
                <h2>Manage Your Password</h2>
                <form id="passwordForm" method="POST" action="/managepassword">
                    <input type="hidden" name="csrf_token" value="">
                    
                    <!-- Your form fields here -->
                    <input type="password" id="currentPassword" name="currentPassword" placeholder="Current Password" required>
<input type="password" id="newPassword" name="newPassword" placeholder="New Password" required>
<input type="password" id="confirmPassword" name="confirmPassword" placeholder="Confirm New Password" required>

                    <div class="password-strength">Password should be at least 8 characters long</div>
<div class="password-match" style="display: none;">Passwords match!</div>
<div class="password-mismatch" style="display: none;">Passwords do not match!</div>
<div id="responseMessage"></div>
                    
                    <button type="submit">Change Password</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Footer Section Starts -->
    <footer class="footer">
        <div class="box-container">
            <div class="box">
                <h3>Quick Links</h3>
                <a href="#home"><i class="fas fa-home"></i> Home</a>
                <a href="#experiences"><i class="fas fa-map-marked-alt"></i> Experiences</a>
                <a href="#help"><i class="fas fa-question-circle"></i> Help</a>
                <a href="#about"><i class="fas fa-info-circle"></i> About</a>
                <a href="#blogs"><i class="fas fa-comments"></i> Blogs & Reviews</a>
            </div>
            <div class="box">
                <h3>Legal</h3>
                <a href="#privacy"><i class="fas fa-user-shield"></i> Privacy Policy</a>
                <a href="#terms"><i class="fas fa-file-contract"></i> Terms & Conditions</a>
            </div>
            <div class="box">
                <h3>Connect With Us</h3>
                <a href="#"><i class="fab fa-facebook"></i> Facebook</a>
                <a href="#"><i class="fab fa-twitter"></i> Twitter</a>
                <a href="#"><i class="fab fa-instagram"></i> Instagram</a>
                <a href="#"><i class="fab fa-whatsapp"></i> WhatsApp</a>
            </div>
            <div class="box">
                <h3>Contact Us</h3>
                <a href="tel:+94760127391"><i class="fas fa-phone"></i> +94 760 127 391</a>
                <a href="https://maps.google.com/?q=Colombo,Sri Lanka" target="_blank">
                    <i class="fas fa-map-marker-alt"></i> Colombo, Sri Lanka
                </a>
                <a href="mailto:Ayubogo@gmail.com"><i class="fas fa-envelope"></i> Ayubogo@gmail.com</a>
            </div>
        </div>
        <div class="credit">Â© 2025 <strong>AyuboGo.lk</strong>. All rights reserved.</div>
    </footer>
    <!-- Footer Section Ends -->

    <script>
        document.addEventListener('DOMContentLoaded', function() {
    const passwordForm = document.getElementById('passwordForm');
    const newPasswordInput = document.getElementById('newPassword');
    const confirmPasswordInput = document.getElementById('confirmPassword');
    const currentPasswordInput = document.getElementById('currentPassword');
    const strengthMessage = document.querySelector('.password-strength');
    const matchMessage = document.querySelector('.password-match');
    const mismatchMessage = document.querySelector('.password-mismatch');
    const responseMessage = document.getElementById('responseMessage');

    // Password strength requirements
    const requirements = {
        length: 8,
        uppercase: true,
        lowercase: true,
        number: true,
        specialChar: true
    };

    // Real-time password strength checker
    newPasswordInput.addEventListener('input', function() {
        const password = this.value;
        const strength = checkPasswordStrength(password);
        
        updateStrengthIndicator(strength);
    });

    // Real-time password matching checker
    confirmPasswordInput.addEventListener('input', function() {
        checkPasswordMatch();
    });

    // Form submission handler
    passwordForm.addEventListener('submit', function(e) {
        e.preventDefault();
        responseMessage.textContent = '';
        responseMessage.className = '';
        
        // Validate form before submission
        if (!validateForm()) {
            return;
        }

        // Submit form via AJAX
        submitPasswordChange();
    });

    function checkPasswordStrength(password) {
        const strength = {
            length: password.length >= requirements.length,
            uppercase: requirements.uppercase ? /[A-Z]/.test(password) : true,
            lowercase: requirements.lowercase ? /[a-z]/.test(password) : true,
            number: requirements.number ? /[0-9]/.test(password) : true,
            specialChar: requirements.specialChar ? /[^A-Za-z0-9]/.test(password) : true
        };

        strength.score = Object.values(strength).filter(Boolean).length;
        strength.total = Object.keys(strength).length - 1; // exclude 'score'
        
        return strength;
    }

    function updateStrengthIndicator(strength) {
        const strengthText = [
            'Very Weak',
            'Weak',
            'Moderate',
            'Strong',
            'Very Strong'
        ][Math.floor((strength.score / strength.total) * 4)];
        
        const strengthColors = [
            '#ff0000', // red
            '#ff4500', // orange-red
            '#ffa500', // orange
            '#9acd32', // yellow-green
            '#008000'  // green
        ];
        
        strengthMessage.textContent = `Password strength: ${strengthText}`;
        strengthMessage.style.color = strengthColors[Math.floor((strength.score / strength.total) * 4)];
        
        // Detailed requirements
        const requirementMessages = [];
        
        if (!strength.length) {
            requirementMessages.push(`At least ${requirements.length} characters`);
        }
        if (requirements.uppercase && !strength.uppercase) {
            requirementMessages.push('At least one uppercase letter');
        }
        if (requirements.lowercase && !strength.lowercase) {
            requirementMessages.push('At least one lowercase letter');
        }
        if (requirements.number && !strength.number) {
            requirementMessages.push('At least one number');
        }
        if (requirements.specialChar && !strength.specialChar) {
            requirementMessages.push('At least one special character');
        }
        
        if (requirementMessages.length > 0) {
            strengthMessage.textContent += ` (Missing: ${requirementMessages.join(', ')})`;
        }
    }

    function checkPasswordMatch() {
        const newPassword = newPasswordInput.value;
        const confirmPassword = confirmPasswordInput.value;
        
        if (confirmPassword === '') {
            matchMessage.style.display = 'none';
            mismatchMessage.style.display = 'none';
            return;
        }
        
        if (newPassword === confirmPassword) {
            matchMessage.style.display = 'block';
            mismatchMessage.style.display = 'none';
        } else {
            matchMessage.style.display = 'none';
            mismatchMessage.style.display = 'block';
        }
    }

    function validateForm() {
        const currentPassword = currentPasswordInput.value;
        const newPassword = newPasswordInput.value;
        const confirmPassword = confirmPasswordInput.value;
        
        // Check current password
        if (!currentPassword) {
            showError('Please enter your current password');
            currentPasswordInput.focus();
            return false;
        }
        
        // Check new password strength
        const strength = checkPasswordStrength(newPassword);
        if (strength.score < strength.total) {
            showError('Please make your new password stronger');
            newPasswordInput.focus();
            return false;
        }
        
        // Check password match
        if (newPassword !== confirmPassword) {
            showError('New passwords do not match');
            confirmPasswordInput.focus();
            return false;
        }
        
        // Check if new password is different from current
        if (newPassword === currentPassword) {
            showError('New password must be different from current password');
            newPasswordInput.focus();
            return false;
        }
        
        return true;
    }

    function submitPasswordChange() {
        const formData = new FormData(passwordForm);
        
        // Show loading state
        const submitBtn = passwordForm.querySelector('button[type="submit"]');
        const originalBtnText = submitBtn.textContent;
        submitBtn.disabled = true;
        submitBtn.textContent = 'Processing...';
        
        fetch('/managepassword', {
            method: 'POST',
            body: formData,
            headers: {
                'X-Requested-With': 'XMLHttpRequest' // Identify as AJAX request
            }
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            if (data.success) {
                showSuccess(data.message);
                passwordForm.reset();
                matchMessage.style.display = 'none';
                mismatchMessage.style.display = 'none';
                strengthMessage.textContent = 'Password should be at least 8 characters long';
                strengthMessage.style.color = '#ccc';
            } else {
                showError(data.message);
            }
        })
        .catch(error => {
            console.error('Error:', error);
            showError('An error occurred. Please try again.');
        })
        .finally(() => {
            submitBtn.disabled = false;
            submitBtn.textContent = originalBtnText;
        });
    }

    function showError(message) {
        responseMessage.textContent = message;
        responseMessage.className = 'error-message';
        responseMessage.style.color = '#ff4444';
    }

    function showSuccess(message) {
        responseMessage.textContent = message;
        responseMessage.className = 'success-message';
        responseMessage.style.color = '#00C851';
    }
});
    </script>
</body>
</html>