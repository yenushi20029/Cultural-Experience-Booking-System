<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
    <script src='main.js'></script>

    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
   

    <style>

*{
    margin:0;
    padding: 0;
    box-sizing: border-box;
    font-family: "Poppins", sans-serif;
}

header{
    z-index:999;
    position: absolute;
    top:0;
    left:0;
    width:100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 200px;
    transition: 0.5s ease;
}

header .brand{
    color:white;
    font-size: 1.5em;
    font-weight: 700;
    text-transform: uppercase;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap:8px;
    white-space: nowrap;
    font-family: 'Arial', sans-serif;
}

header .brand i {
    font-size: 1.5em; 
    color: #C6A969; 
}

.navigation {
    display: flex;
    gap: 20px;
    flex-grow: 2; 
    justify-content: flex-end; 
}

.brand {
    font-size: 1.8em;
    font-weight: bold;
    flex-grow: 1; 
    color: white; 
}

header .navigation{
    position: relative;
}

header .navigation .navigation-items a{
    position: relative;
    color: white;
    font-size: 1em;
    font-weight: 500;
    text-decoration: none;
    margin-left: 30px;
    transition: 0.3s ease;
}

header .navigation .navigation-items a:before{
    content:'';
    position: absolute;
    background: white;
    width:0;
    height: 3px;
    bottom: 0;
    left:0;
    transition: 0.3s ease;
}

header .navigation .navigation-items a:hover:before{
    width:100%; 
}

.search-bar {
    padding: 5px;
    margin-left: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    width: 160px;
}

.btnr1 {
    padding: 10px 15px;
    background-color:black;
    color: white;
    border: none;
    border-radius: 25px;
    margin-left: 5px;
    cursor: pointer;
    opacity: 60%;
}

.btnr1:hover {
    background-color: #C6A969;
}

@media (max-width: 1040px){
    header {
        padding: 12px 20px;
    }
}
        
.footer {
    width: 100%;
    background: #222;
    padding: 20px;
    text-align: center;
    margin-top: auto;
}

body {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    background: #597E52;
}

.container {
    flex-grow: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 50px 20px;
    width: 100%;
}

.wrapper {
    width: 850px;
    background: linear-gradient(145deg, #4E6F48, #3b4a34);
    border-radius: 20px;
    padding: 40px;
    color: white;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    transition: 0.3s ease;
    margin: 100px 0;
}

.footer .box-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 5px;
}

.footer .box-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
}

.footer .box {
    flex: 1 1 200px;
    max-width: 300px;
    text-align: left;
}

.footer .box h3 {
    font-size: 18px;
    margin-bottom: 15px;
    color: #C6A969;
}

.footer .box a {
    display: block;
    color: #ccc;
    font-size: 14px;
    text-decoration: none;
    margin: 5px 0;
    transition: color 0.3s ease;
}

.footer .box a:hover {
    color: #C6A969;
}

.footer .box i {
    margin-right: 8px;
}

.footer .credit {
    margin-top: 20px;
    font-size: 14px;
    border-top: 1px solid #444;
    padding-top: 10px;
    text-align: center; 
}


.footer .credit strong {
    color: #C6A969;
}


@keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

@keyframes fadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
}
.user-profile {
    display: flex;
    align-items: center;
    gap: 5px;  /* Reduced from 10px */
    color: white;
    margin-left: 10px;  /* Reduced from 20px */
        }

        .user-profile img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #C6A969;
        }

        .btnr1 {
            padding: 10px 15px;
            background-color: black;
            color: white;
            border: none;
            border-radius: 25px;
            margin-left: 5px;
            cursor: pointer;
            opacity: 60%;
        }

        .btnr1:hover {
            background-color: #C6A969;
        }

        .container {
            flex-grow: 1;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 50px 20px 30px;
        }

        .profile-wrapper {
            width: 850px;
    background: linear-gradient(145deg, #4E6F48, #3b4a34);
    border-radius: 20px;
    padding: 30px;
    color: white;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    transition: 0.3s ease;
    margin-top: 100px;
    margin-bottom: 50px;
    position: relative;
        }

        .profile-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #C6A969;
        }

        .profile-header h1 {
            font-size: 28px;
            color: #C6A969;
        }

        .profile-actions {
            display: flex;
            gap: 10px;
            position: absolute;
    bottom: 40px;
    right: 30px;
    grid-column: unset;
    margin-top: 0;
    border-top: none;
    
        }

        .profile-content {
    gap: 15px;
    margin-bottom: 0;
}

.profile-field {
    margin-bottom: 15px;
}

.button-container {
    display: flex;
    gap: 1rem;
    margin-top: 2rem;
}


.button-container button {
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
    transition: background-color 0.2s;
    flex: 1; 
    min-width: 120px; 
    text-align: center; 
   
}

/* Specific button colors */
#saveBtn {
    background-color: #4CAF50;
    color: white;
}

#logoutBtn2 {
    background-color: #f44336;
    color: white;
}

#deleteBtn {
    background-color: #555;
    color: white;
}

.button-container button:hover {
    opacity: 0.9;
}
        .profile-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            
        }

        .profile-field {
            margin-bottom: 20px;
        }

        .profile-field label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            font-size: 14px;
            color: #C6A969;
        }

        .profile-field input,
        .profile-field select {
            width: 100%;
            padding: 12px;
            border-radius: 10px;
            border: 1px solid #C6A969;
            outline: none;
            background-color: white;
            color: black;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .profile-field input:focus,
        .profile-field select:focus {
            border: 1px solid #C6A969;
            box-shadow: 0 0 5px #C6A969;
        }

        .radio-group {
            display: flex;
            gap: 15px;
            align-items: center;
            margin-top: 10px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .radio-option input {
            width: 16px;
            height: 16px;
            accent-color: #C6A969;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 5px;
            color: white;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        }

        .success {
            background-color: #4CAF50;
        }

        .error {
            background-color: #F44336;
        }

        .fade-out {
            animation: fadeOut 0.3s ease-in;
        }

        .confirmation-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            color: black;
        }

        .modal-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .modal-btn {
            padding: 8px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
        }

        .confirm-btn {
            background: #d9534f;
            color: white;
        }

        .cancel-btn {
            background: #5bc0de;
            color: white;
        }

        
        
    </style>
</head>
<body>
    <!--Header Section-->
    <header>
        <a href="#" class="brand"> Ayubo Go</a>
        </div>
        <div class="navigation">
            <div class="navigation-items">
              <a href="#">Home</a>
              <a href="#">Experiences</a>
              <a href="#">Help</a>
              <a href="#">About</a>
              <a href="#">Blogs and reviews</a>
              

                
              <button class="btnr1">Book Now</button>

            </div>
        </div>
    </header>

    <div class="container">
        <div class="profile-wrapper">
            <div class="profile-header" required>
                <h1>Welcome to your profile, {{ tourist.first_name if tourist else 'User' }}!</h1>
                
            </div>

            <div class="profile-content">
                <div class="profile-column">
                    <div class="profile-field" required>
                        <label for="first-name">First Name</label>
                        <input type="text" id="first-name" name="first_name" value="{{ tourist.first_name if tourist else '' }}">
                    </div>
                    
                    <div class="profile-field" required>
                        <label for="middle-name">Middle Name</label>
                        <input type="text" id="middle-name" name="middle_name" value="{{ tourist.middle_name if tourist else '' }}">
                    </div>
                    
                    <div class="profile-field" required>
                        <label for="last-name">Last Name</label>
                        <input type="text" id="last-name" name="last_name" value="{{ tourist.last_name if tourist else '' }}">
                    </div>
                    
                    <div class="profile-field" required>
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" value="{{ tourist.email if tourist else '' }}">
                    </div>
                </div>
                
                <div class="profile-column">
                    <div class="profile-field" required>
                        <label for="country">Country</label>
                         <select id="country" name="country">
                           <option value="" disabled selected>Select your country</option>
                            <option value="" selected="selected">Select Country</option> 
                            <option value="United States">United States</option> 
                            <option value="United Kingdom">United Kingdom</option> 
                            <option value="Afghanistan">Afghanistan</option> 
                            <option value="Albania">Albania</option> 
                            <option value="Algeria">Algeria</option> 
                            <option value="American Samoa">American Samoa</option> 
                            <option value="Andorra">Andorra</option> 
                            <option value="Angola">Angola</option> 
                            <option value="Anguilla">Anguilla</option> 
                            <option value="Antarctica">Antarctica</option> 
                            <option value="Antigua and Barbuda">Antigua and Barbuda</option> 
                            <option value="Argentina">Argentina</option> 
                            <option value="Armenia">Armenia</option> 
                            <option value="Aruba">Aruba</option> 
                            <option value="Australia">Australia</option> 
                            <option value="Austria">Austria</option> 
                            <option value="Azerbaijan">Azerbaijan</option> 
                            <option value="Bahamas">Bahamas</option> 
                            <option value="Bahrain">Bahrain</option> 
                            <option value="Bangladesh">Bangladesh</option> 
                            <option value="Barbados">Barbados</option> 
                            <option value="Belarus">Belarus</option> 
                            <option value="Belgium">Belgium</option> 
                            <option value="Belize">Belize</option> 
                            <option value="Benin">Benin</option> 
                            <option value="Bermuda">Bermuda</option> 
                            <option value="Bhutan">Bhutan</option> 
                            <option value="Bolivia">Bolivia</option> 
                            <option value="Bosnia and Herzegovina">Bosnia and Herzegovina</option> 
                            <option value="Botswana">Botswana</option> 
                            <option value="Bouvet Island">Bouvet Island</option> 
                            <option value="Brazil">Brazil</option> 
                            <option value="British Indian Ocean Territory">British Indian Ocean Territory</option> 
                            <option value="Brunei Darussalam">Brunei Darussalam</option> 
                            <option value="Bulgaria">Bulgaria</option> 
                            <option value="Burkina Faso">Burkina Faso</option> 
                            <option value="Burundi">Burundi</option> 
                            <option value="Cambodia">Cambodia</option> 
                            <option value="Cameroon">Cameroon</option> 
                            <option value="Canada">Canada</option> 
                            <option value="Cape Verde">Cape Verde</option> 
                            <option value="Cayman Islands">Cayman Islands</option> 
                            <option value="Central African Republic">Central African Republic</option> 
                            <option value="Chad">Chad</option> 
                            <option value="Chile">Chile</option> 
                            <option value="China">China</option> 
                            <option value="Christmas Island">Christmas Island</option> 
                            <option value="Cocos (Keeling) Islands">Cocos (Keeling) Islands</option> 
                            <option value="Colombia">Colombia</option> 
                            <option value="Comoros">Comoros</option> 
                            <option value="Congo">Congo</option> 
                            <option value="Congo, The Democratic Republic of The">Congo, The Democratic Republic of The</option> 
                            <option value="Cook Islands">Cook Islands</option> 
                            <option value="Costa Rica">Costa Rica</option> 
                            <option value="Cote D'ivoire">Cote D'ivoire</option> 
                            <option value="Croatia">Croatia</option> 
                            <option value="Cuba">Cuba</option> 
                            <option value="Cyprus">Cyprus</option> 
                            <option value="Czech Republic">Czech Republic</option> 
                            <option value="Denmark">Denmark</option> 
                            <option value="Djibouti">Djibouti</option> 
                            <option value="Dominica">Dominica</option> 
                            <option value="Dominican Republic">Dominican Republic</option> 
                            <option value="Ecuador">Ecuador</option> 
                            <option value="Egypt">Egypt</option> 
                            <option value="El Salvador">El Salvador</option> 
                            <option value="Equatorial Guinea">Equatorial Guinea</option> 
                            <option value="Eritrea">Eritrea</option> 
                            <option value="Estonia">Estonia</option> 
                            <option value="Ethiopia">Ethiopia</option> 
                            <option value="Falkland Islands (Malvinas)">Falkland Islands (Malvinas)</option> 
                            <option value="Faroe Islands">Faroe Islands</option> 
                            <option value="Fiji">Fiji</option> 
                            <option value="Finland">Finland</option> 
                            <option value="France">France</option> 
                            <option value="French Guiana">French Guiana</option> 
                            <option value="French Polynesia">French Polynesia</option> 
                            <option value="French Southern Territories">French Southern Territories</option> 
                            <option value="Gabon">Gabon</option> 
                            <option value="Gambia">Gambia</option> 
                            <option value="Georgia">Georgia</option> 
                            <option value="Germany">Germany</option> 
                            <option value="Ghana">Ghana</option> 
                            <option value="Gibraltar">Gibraltar</option> 
                            <option value="Greece">Greece</option> 
                            <option value="Greenland">Greenland</option> 
                            <option value="Grenada">Grenada</option> 
                            <option value="Guadeloupe">Guadeloupe</option> 
                            <option value="Guam">Guam</option> 
                            <option value="Guatemala">Guatemala</option> 
                            <option value="Guinea">Guinea</option> 
                            <option value="Guinea-bissau">Guinea-bissau</option> 
                            <option value="Guyana">Guyana</option> 
                            <option value="Haiti">Haiti</option> 
                            <option value="Heard Island and Mcdonald Islands">Heard Island and Mcdonald Islands</option> 
                            <option value="Holy See (Vatican City State)">Holy See (Vatican City State)</option> 
                            <option value="Honduras">Honduras</option> 
                            <option value="Hong Kong">Hong Kong</option> 
                            <option value="Hungary">Hungary</option> 
                            <option value="Iceland">Iceland</option> 
                            <option value="India">India</option> 
                            <option value="Indonesia">Indonesia</option> 
                            <option value="Iran, Islamic Republic of">Iran, Islamic Republic of</option> 
                            <option value="Iraq">Iraq</option> 
                            <option value="Ireland">Ireland</option> 
                            <option value="Israel">Israel</option> 
                            <option value="Italy">Italy</option> 
                            <option value="Jamaica">Jamaica</option> 
                            <option value="Japan">Japan</option> 
                            <option value="Jordan">Jordan</option> 
                            <option value="Kazakhstan">Kazakhstan</option> 
                            <option value="Kenya">Kenya</option> 
                            <option value="Kiribati">Kiribati</option> 
                            <option value="Korea, Democratic People's Republic of">Korea, Democratic People's Republic of</option> 
                            <option value="Korea, Republic of">Korea, Republic of</option> 
                            <option value="Kuwait">Kuwait</option> 
                            <option value="Kyrgyzstan">Kyrgyzstan</option> 
                            <option value="Lao People's Democratic Republic">Lao People's Democratic Republic</option> 
                            <option value="Latvia">Latvia</option> 
                            <option value="Lebanon">Lebanon</option> 
                            <option value="Lesotho">Lesotho</option> 
                            <option value="Liberia">Liberia</option> 
                            <option value="Libyan Arab Jamahiriya">Libyan Arab Jamahiriya</option> 
                            <option value="Liechtenstein">Liechtenstein</option> 
                            <option value="Lithuania">Lithuania</option> 
                            <option value="Luxembourg">Luxembourg</option> 
                            <option value="Macao">Macao</option> 
                            <option value="Macedonia, The Former Yugoslav Republic of">Macedonia, The Former Yugoslav Republic of</option> 
                            <option value="Madagascar">Madagascar</option> 
                            <option value="Malawi">Malawi</option> 
                            <option value="Malaysia">Malaysia</option> 
                            <option value="Maldives">Maldives</option> 
                            <option value="Mali">Mali</option> 
                            <option value="Malta">Malta</option> 
                            <option value="Marshall Islands">Marshall Islands</option> 
                            <option value="Martinique">Martinique</option> 
                            <option value="Mauritania">Mauritania</option> 
                            <option value="Mauritius">Mauritius</option> 
                            <option value="Mayotte">Mayotte</option> 
                            <option value="Mexico">Mexico</option> 
                            <option value="Micronesia, Federated States of">Micronesia, Federated States of</option> 
                            <option value="Moldova, Republic of">Moldova, Republic of</option> 
                            <option value="Monaco">Monaco</option> 
                            <option value="Mongolia">Mongolia</option> 
                            <option value="Montserrat">Montserrat</option> 
                            <option value="Morocco">Morocco</option> 
                            <option value="Mozambique">Mozambique</option> 
                            <option value="Myanmar">Myanmar</option> 
                            <option value="Namibia">Namibia</option> 
                            <option value="Nauru">Nauru</option> 
                            <option value="Nepal">Nepal</option> 
                            <option value="Netherlands">Netherlands</option> 
                            <option value="Netherlands Antilles">Netherlands Antilles</option> 
                            <option value="New Caledonia">New Caledonia</option> 
                            <option value="New Zealand">New Zealand</option> 
                            <option value="Nicaragua">Nicaragua</option> 
                            <option value="Niger">Niger</option> 
                            <option value="Nigeria">Nigeria</option> 
                            <option value="Niue">Niue</option> 
                            <option value="Norfolk Island">Norfolk Island</option> 
                            <option value="Northern Mariana Islands">Northern Mariana Islands</option> 
                            <option value="Norway">Norway</option> 
                            <option value="Oman">Oman</option> 
                            <option value="Pakistan">Pakistan</option> 
                            <option value="Palau">Palau</option> 
                            <option value="Palestinian Territory, Occupied">Palestinian Territory, Occupied</option> 
                            <option value="Panama">Panama</option> 
                            <option value="Papua New Guinea">Papua New Guinea</option> 
                            <option value="Paraguay">Paraguay</option> 
                            <option value="Peru">Peru</option> 
                            <option value="Philippines">Philippines</option> 
                            <option value="Pitcairn">Pitcairn</option> 
                            <option value="Poland">Poland</option> 
                            <option value="Portugal">Portugal</option> 
                            <option value="Puerto Rico">Puerto Rico</option> 
                            <option value="Qatar">Qatar</option> 
                            <option value="Reunion">Reunion</option> 
                            <option value="Romania">Romania</option> 
                            <option value="Russian Federation">Russian Federation</option> 
                            <option value="Rwanda">Rwanda</option> 
                            <option value="Saint Helena">Saint Helena</option> 
                            <option value="Saint Kitts and Nevis">Saint Kitts and Nevis</option> 
                            <option value="Saint Lucia">Saint Lucia</option> 
                            <option value="Saint Pierre and Miquelon">Saint Pierre and Miquelon</option> 
                            <option value="Saint Vincent and The Grenadines">Saint Vincent and The Grenadines</option> 
                            <option value="Samoa">Samoa</option> 
                            <option value="San Marino">San Marino</option> 
                            <option value="Sao Tome and Principe">Sao Tome and Principe</option> 
                            <option value="Saudi Arabia">Saudi Arabia</option> 
                            <option value="Senegal">Senegal</option> 
                            <option value="Serbia and Montenegro">Serbia and Montenegro</option> 
                            <option value="Seychelles">Seychelles</option> 
                            <option value="Sierra Leone">Sierra Leone</option> 
                            <option value="Singapore">Singapore</option> 
                            <option value="Slovakia">Slovakia</option> 
                            <option value="Slovenia">Slovenia</option> 
                            <option value="Solomon Islands">Solomon Islands</option> 
                            <option value="Somalia">Somalia</option> 
                            <option value="South Africa">South Africa</option> 
                            <option value="South Georgia and The South Sandwich Islands">South Georgia and The South Sandwich Islands</option> 
                            <option value="Spain">Spain</option> 
                            <option value="Sri Lanka">Sri Lanka</option> 
                            <option value="Sudan">Sudan</option> 
                            <option value="Suriname">Suriname</option> 
                            <option value="Svalbard and Jan Mayen">Svalbard and Jan Mayen</option> 
                            <option value="Swaziland">Swaziland</option> 
                            <option value="Sweden">Sweden</option> 
                            <option value="Switzerland">Switzerland</option> 
                            <option value="Syrian Arab Republic">Syrian Arab Republic</option> 
                            <option value="Taiwan, Province of China">Taiwan, Province of China</option> 
                            <option value="Tajikistan">Tajikistan</option> 
                            <option value="Tanzania, United Republic of">Tanzania, United Republic of</option> 
                            <option value="Thailand">Thailand</option> 
                            <option value="Timor-leste">Timor-leste</option> 
                            <option value="Togo">Togo</option> 
                            <option value="Tokelau">Tokelau</option> 
                            <option value="Tonga">Tonga</option> 
                            <option value="Trinidad and Tobago">Trinidad and Tobago</option> 
                            <option value="Tunisia">Tunisia</option> 
                            <option value="Turkey">Turkey</option> 
                            <option value="Turkmenistan">Turkmenistan</option> 
                            <option value="Turks and Caicos Islands">Turks and Caicos Islands</option> 
                            <option value="Tuvalu">Tuvalu</option> 
                            <option value="Uganda">Uganda</option> 
                            <option value="Ukraine">Ukraine</option> 
                            <option value="United Arab Emirates">United Arab Emirates</option> 
                            <option value="United Kingdom">United Kingdom</option> 
                            <option value="United States">United States</option> 
                            <option value="United States Minor Outlying Islands">United States Minor Outlying Islands</option> 
                            <option value="Uruguay">Uruguay</option> 
                            <option value="Uzbekistan">Uzbekistan</option> 
                            <option value="Vanuatu">Vanuatu</option> 
                            <option value="Venezuela">Venezuela</option> 
                            <option value="Viet Nam">Viet Nam</option> 
                            <option value="Virgin Islands, British">Virgin Islands, British</option> 
                            <option value="Virgin Islands, U.S.">Virgin Islands, U.S.</option> 
                            <option value="Wallis and Futuna">Wallis and Futuna</option> 
                            <option value="Western Sahara">Western Sahara</option> 
                            <option value="Yemen">Yemen</option> 
                            <option value="Zambia">Zambia</option> 
                            <option value="Zimbabwe">Zimbabwe</option> 
                        </select>
                    </div>
                    
                    <div class="profile-field">
                        <label for="dob" required>Date of Birth</label>
                        <input type="date" id="dob" name="dob" value="{{ tourist.dob if tourist else '' }}">
                    </div>
                    
                    <div class="profile-field">
                        <label>First-time Visitor?</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="visitor-yes" name="first_time_visitor" value="yes" {% if tourist and tourist.first_time_visitor == 'yes' %}checked{% endif %}>
                                <label for="visitor-yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="visitor-no" name="first_time_visitor" value="no" {% if tourist and tourist.first_time_visitor == 'no' %}checked{% endif %}>
                                <label for="visitor-no">No</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="profile-field">
                        <label for="passport-number">Passport Number</label>
                        <input type="text" id="passport-number" name="passport_number" value="{{ tourist.passport_number if tourist else '' }}">
                    </div>

                   
                    <div class="button-container">
                        <button id="saveBtn">Save Changes</button>
                        <button id="logoutBtn2">Logout</button>
                        <button id="deleteBtn">Delete Account</button>
                    </div>
                </div>
            </div>
        </div>
        
    </div>

     <!-- Footer Section Starts -->
<footer class="footer">
    <div class="box-container">
        <div class="box">
            <h3>Quick Links</h3>
            <a href="#home"><i class="fas fa-home"></i> Home</a>
            <a href="#experiences"><i class="fas fa-map-marked-alt"></i> Experiences</a>
            <a href="#help"><i class="fas fa-question-circle"></i> Help</a>
            <a href="#about"><i class="fas fa-info-circle"></i> About</a>
            <a href="#blogs"><i class="fas fa-comments"></i> Blogs & Reviews</a>
        </div>
        <div class="box">
            <h3>Legal</h3>
            <a href="#privacy"><i class="fas fa-user-shield"></i> Privacy Policy</a>
            <a href="#terms"><i class="fas fa-file-contract"></i> Terms & Conditions</a>
        </div>
        <div class="box">
            <h3>Connect With Us</h3>
            <a href="#"><i class="fab fa-facebook"></i> Facebook</a>
            <a href="#"><i class="fab fa-twitter"></i> Twitter</a>
            <a href="#"><i class="fab fa-instagram"></i> Instagram</a>
            <a href="#"><i class="fab fa-whatsapp"></i> WhatsApp</a>
        </div>
        <div class="box">
            <h3>Contact Us</h3>
            <a href="tel:+94760127391"><i class="fas fa-phone"></i> +94 760 127 391</a>
            <a href="https://maps.google.com/?q=Colombo,Sri Lanka" target="_blank">
                <i class="fas fa-map-marker-alt"></i> Colombo, Sri Lanka
            </a>
            <a href="mailto:Ayubogo@gmail.com"><i class="fas fa-envelope"></i> Ayubogo@gmail.com</a>
        </div>
    </div>
    <div class="credit">© 2025 <strong>AyuboGo.lk</strong>. All rights reserved.</div>
</footer>
<!-- Footer Section Ends -->

<script>
// Utility function for safe element selection
function getElementSafe(id) {
    try {
        if (!id || typeof id !== 'string') {
            console.error('Invalid ID provided');
            return null;
        }
        
        const element = document.getElementById(id);
        if (!element) {
            console.error(`Element with ID '${id}' not found`);
        }
        return element;
    } catch (error) {
        console.error('Error in getElementSafe:', error);
        return null;
    }
}

// Notification system
function showNotification(message, type = 'info') {
    try {
        if (!message || typeof message !== 'string') {
            console.error('Invalid message provided');
            return;
        }

        const validTypes = ['info', 'success', 'error', 'warning'];
        const notificationType = validTypes.includes(type) ? type : 'info';

        const notification = document.createElement('div');
        notification.className = `notification ${notificationType}`;
        notification.textContent = message;
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.classList.add('fade-out');
            setTimeout(() => {
                try {
                    notification.remove();
                } catch (e) {
                    console.error('Error removing notification:', e);
                }
            }, 300);
        }, 3000);
    } catch (error) {
        console.error('Error in showNotification:', error);
    }
}

// Form data collection with validation
function collectFormData() {
    try {
        const firstTimeVisitorRadio = document.querySelector('input[name="first_time_visitor"]:checked');
        
        const formData = {
            first_name: (getElementSafe('first-name')?.value || '').trim(),
            middle_name: (getElementSafe('middle-name')?.value || '').trim(),
            last_name: (getElementSafe('last-name')?.value || '').trim(),
            email: (getElementSafe('email')?.value || '').trim(),
            country: getElementSafe('country')?.value || '',
            dob: getElementSafe('dob')?.value || '',
            first_time_visitor: firstTimeVisitorRadio?.value || 'no',
            passport_number: (getElementSafe('passport-number')?.value || '').trim()
        };

        // Validate required fields
        if (!formData.first_name || !formData.last_name || !formData.email) {
            throw new Error('First name, last name, and email are required');
        }

        // Basic email validation
        if (formData.email && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(formData.email)) {
            throw new Error('Please enter a valid email address');
        }

        return formData;
    } catch (error) {
        console.error('Error collecting form data:', error);
        showNotification(error.message || 'Error collecting form data', 'error');
        return null;
    }
}

// API request handler
async function makeRequest(url, method = 'GET', data = null) {
    try {
        if (!url || typeof url !== 'string') {
            throw new Error('Invalid URL provided');
        }

        const config = {
            method: method.toUpperCase(),
            headers: { 'Content-Type': 'application/json' }
        };

        if (data && ['POST', 'PUT', 'PATCH'].includes(config.method)) {
            config.body = JSON.stringify(data);
        }

        const response = await fetch(url, config);

        if (!response.ok) {
            const errorData = await response.json().catch(() => ({}));
            throw new Error(errorData.message || `HTTP error! status: ${response.status}`);
        }

        return await response.json();
    } catch (error) {
        console.error(`${method} request to ${url} failed:`, error);
        throw error;
    }
}

// Main functions
async function saveChanges() {
    try {
        const formData = collectFormData();
        if (!formData) return;

        const touristId = window.touristId || '';
        const url = `/edit/${touristId}`;

        const data = await makeRequest(url, 'POST', formData);

        if (data?.success) {
            showNotification('Changes saved successfully!', 'success');
        } else {
            throw new Error(data?.message || 'Failed to save changes');
        }
    } catch (error) {
        showNotification(error.message || 'Error saving changes', 'error');
    }
}

function logout() {
    try {
        window.location.href = '/userdash';
    } catch (error) {
        console.error('Error during logout:', error);
        showNotification('Error during logout', 'error');
    }
}

// Enhanced country selection handler
function setCountrySelection() {
    try {
        const countrySelect = getElementSafe('country');
        if (!countrySelect) {
            console.warn('Country select element not found');
            return;
        }

        if (!window.touristCountry || typeof window.touristCountry !== 'string') {
            console.warn('No valid touristCountry available:', window.touristCountry);
            return;
        }

        const userCountry = window.touristCountry.trim();
        if (!userCountry) return;

        // Case-insensitive search with exact matching
        const normalizedUserCountry = userCountry.toLowerCase();
        let foundMatch = false;

        for (let option of countrySelect.options) {
            if (option.value.toLowerCase() === normalizedUserCountry) {
                option.selected = true;
                foundMatch = true;
                console.debug('Country matched:', option.value);
                break;
            }
        }

        if (!foundMatch) {
            console.warn('Country not found in dropdown:', userCountry);
            // Fallback: Try to match without case sensitivity
            for (let option of countrySelect.options) {
                if (option.value.toLowerCase().includes(normalizedUserCountry)) {
                    option.selected = true;
                    console.warn('Used partial match for country:', option.value);
                    break;
                }
            }
        }
    } catch (error) {
        console.error('Country selection error:', error);
    }
}

// Confirmation modal
function showConfirmationModal(title, message) {
    return new Promise((resolve) => {
        const modal = document.createElement('div');
        modal.className = 'confirmation-modal';
        modal.innerHTML = `
            <div class="modal-content">
                <h3>${title}</h3>
                <p>${message}</p>
                <div class="modal-buttons">
                    <button class="modal-btn confirm-btn">Confirm</button>
                    <button class="modal-btn cancel-btn">Cancel</button>
                </div>
            </div>
        `;
        
        document.body.appendChild(modal);
        
        const confirmBtn = modal.querySelector('.confirm-btn');
        const cancelBtn = modal.querySelector('.cancel-btn');
        
        const cleanup = () => {
            confirmBtn.removeEventListener('click', onConfirm);
            cancelBtn.removeEventListener('click', onCancel);
            modal.remove();
        };
        
        const onConfirm = () => {
            cleanup();
            resolve(true);
        };
        
        const onCancel = () => {
            cleanup();
            resolve(false);
        };
        
        confirmBtn.addEventListener('click', onConfirm);
        cancelBtn.addEventListener('click', onCancel);
    });
}

// Check for active bookings
async function checkForBookings(touristId) {
    try {
        // First get the user's email
        const userResponse = await fetch(`/get-user-email/${touristId}`);
        if (!userResponse.ok) {
            throw new Error('Failed to fetch user email');
        }
        
        const userData = await userResponse.json();
        alert("userData", userData);
        if (!userData.email) {
            throw new Error('User email not found');
        }
        // Then check for bookings with this email
        const bookingsResponse = await fetch(`/check-bookings?tourist_id=${encodeURIComponent(touristId)}`);
        alert("bookingsResponse", bookingsResponse);
        if (!bookingsResponse.ok) {
            throw new Error('Failed to check bookings');
        }
        
        const bookingsData = await bookingsResponse.json();
        return bookingsData.has_bookings;
    } catch (error) {
        console.error('Error checking bookings:', error);
        // If there's an error checking, prevent deletion to be safe
        return true;
    }
}

// Delete account function
async function deleteAccount() {
    try {
        // Show confirmation dialog
        const confirmed = await showConfirmationModal(
            'Delete Account', 
            'Are you sure you want to delete your account? This action cannot be undone.'
        );
        
        if (!confirmed) return;

        const touristId = window.touristId || '';
        if (!touristId) {
            throw new Error('Invalid user ID');
        }
        console.log("touristId", touristId);

        // Then check for bookings with this email
        const bookingsResponse = await fetch(`/check-bookings?tourist_id=${encodeURIComponent(touristId)}`);
        if (!bookingsResponse.ok) {
            throw new Error('Failed to check bookings');
        }
        
        const bookingsData = await bookingsResponse.json();
        
        if (bookingsData.has_bookings) {
            showNotification('Cannot delete account - you have active bookings. Please cancel them first.', 'error');
            return;
        }

        // If no bookings, proceed with deletion
        const response = await fetch(`/delete/${touristId}`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            }
        });

        showNotification('Account deleted successfully', 'success');
        
        // Redirect to home page after successful deletion
        window.location.href = '/';
        
    } catch (error) {
        console.error('Delete account error:', error);
        showNotification(error.message || 'Error deleting account', 'error');
    }
}


// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    try {
        // Debug: Verify tourist data is available
        console.debug('Initializing with tourist data:', {
            id: window.touristId,
            country: window.touristCountry
        });

        // Set country selection
        setCountrySelection();

        // Add event listeners
        const saveBtn = getElementSafe('saveBtn');
        const logoutBtn = getElementSafe('logoutBtn2');
        const deleteBtn = getElementSafe('deleteBtn');

        if (saveBtn) saveBtn.addEventListener('click', saveChanges);
        if (logoutBtn) logoutBtn.addEventListener('click', logout);
        if (deleteBtn) deleteBtn.addEventListener('click', deleteAccount);

    } catch (error) {
        console.error('Initialization error:', error);
        showNotification('Initialization error', 'error');
    }
});

// Ensure tourist data is available from backend
window.touristId = "{{ tourist.id if tourist else '' }}";
window.touristCountry = "{{ tourist.country if tourist and tourist.country else '' }}";
</script>

</body>
</html>